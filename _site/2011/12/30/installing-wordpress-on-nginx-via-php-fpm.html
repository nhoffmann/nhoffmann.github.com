<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>  Installing Wordpress on NGINX via php-fpm |  zentralmaschine.net </title>
  <link rel="stylesheet" href="/assets/css/bootstrap.css" />
  <link rel="stylesheet" href="/assets/css/style.css" />
</head>
<body>
 
  <header class="content">
    <h1><a href="/">Zentralmaschine</a></h1>
  </header>

  <div id="main">
    <nav role="navigation">
    </nav>
 
    <div class="content">
      <p>This is a short tutorial on how to install php-fpm on debian squeeze and how to configure nginx so it will serve a wordpress installation.</p>

<p>Install php-fpm by adding a new apt source: <pre>
sudo echo "deb http://packages.dotdeb.org stable all" &gt;&gt; /etc/apt/sources.list
apt-get update
</pre></p>

<p>Apt will probably complain about a missing key for the just added repository. This can be fixed by adding the key to apts keyring. Please make sure that you get the right key and compare the fingerprints.</p>
<pre>gpg --export &lt;PUBLIC_KEY&gt; | apt-key add -</pre>
<p>Now install php-fpm</p>
<pre>apt-get update
apt-get install php5-fpm php5-suhosin php5-mysql</pre>
<p>By default php-fpm listens on http://127.0.0.1:9000. Since we are on a unix system, we like to make use of sockets. Open fpm pool configuration and search for the <em>listen</em> directive. Then adapt it to your needs. <pre># /etc/php5/fpm/pool.d/www.conf
listen = /tmp/php-fpm.sock</pre></p>

<p>Add an upstream server for php to nginx.conf so it is available for all configurations:</p>
<pre>
# /etc/nginx/nginx.conf
# Upstream to abstract backend connection(s) for PHP.
upstream php {
    server unix:/tmp/php-fpm.sock
    # or whatever you configured php-fpm to listen to
}
</pre>
<p>Add these global configurations for nginx to <code>/etc/nginx/global</code> <script src='https://gist.github.com/1534643.js'> </script></p>

<p>Download wordpress and unpack</p>
<pre>
cd /var/www/mydomain
wget http://wordpress.org/latest.tar.gz
tar xzf latest.tar.gz
</pre>
<p>All that is needed now is the nginx configuration</p>
<pre>
server {
        listen       80;
        server_name  mydomain.com;

        access_log /var/log/nginx/mydomain.access_log;
        error_log /var/log/nginx/mydomain.error_log;

        index              index.php index.html index.htm;

        root         /var/www/mydomain/wordpress;

        include global/restrictions.conf;
        include global/wordpress-ms-subdir.conf;
}
</pre>
    </div>
    
  </div>

  <footer class="content">
    <p>I am Niels Hoffmann, software developer by profession and co-founder of pipapo.co where we build things like <a href="https://blabber.io">Blabber</a> and <a href="http://fandangocast.com">Fandango</a>. I am based in Berlin, Germany. Sometimes I write down my findings and insights on this blog. The rest of the time I am busy creating stuff with computers, mostly on the web.</p>

    <p>You can contact me via Xing, LinkedIn or on Twitter.</p>
  </footer>
 

</body>
</html>